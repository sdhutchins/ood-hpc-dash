{% extends "base.html" %}
{% block content %}
<br/>
<h3>Conda Environments</h3>
<p>The following are the conda environments for the current user based on the paths specified in the settings.
{% if warning %}
<div class="alert alert-warning">{{ warning }}</div>
{% endif %}

{% if envs_by_category %}
  {% for cat in category_order %}
    {% if envs_by_category[cat] %}
    {% set meta = category_meta.get(cat, {}) %}
    <div class="card mb-4 shadow-sm">
      <div class="card-header" style="background-color: var(--theme-bg-color);">
        <h5 class="mb-0">
          {% if meta.icon %}
            <i class="fa-solid {{ meta.icon }} me-2"></i>
          {% endif %}
          {{ meta.title or cat }}
        </h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover table-sm align-middle mb-0">
            <thead style="background-color: var(--theme-bg-color);">
              <tr><th>Name</th><th>Path</th></tr>
            </thead>
            <tbody>
            {% for env in envs_by_category[cat] %}
              <tr>
                <td>{{ env.name }}</td>
                <td class="text-break"><code>{{ env.path }}</code></td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    {% endif %}
  {% endfor %}
{% else %}
  <div class="alert alert-secondary mb-0">No environments found.</div>
{% endif %}
{% endblock %}